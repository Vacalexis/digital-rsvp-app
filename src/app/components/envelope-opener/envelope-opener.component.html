@if (currentEvent(); as evt) {
  <div
    class="envelope-opener"
    [style.--theme-color]="themeColor()"
    [class.opened]="isOpened()"
    [class.revealing]="isRevealing()"
    [class.envelope-down]="isEnvelopeDown()"
    [class.envelope-hidden]="isEnvelopeHidden()"
    [class.full-screen]="isFullScreen()"
  >
    <!-- Background -->
    <div class="backdrop"></div>

    <!-- Tap hint -->
    <div class="tap-hint" [class.hidden]="isOpened()">
      <span>Toca na flor para abrir</span>
    </div>

    <!-- Envelope Wrapper -->
    <div class="wrapper">
      <!-- Lid front (visible when closed) -->
      <div class="lid one"></div>
      <!-- Lid back (visible when opened) -->
      <div class="lid two"></div>
      <!-- Envelope body (front triangles) -->
      <div class="envelope"></div>

      <!-- Floral seal (rotates before opening) -->
      <app-envelope-seal
        [variant]="'floral'"
        [ariaLabel]="'Abrir convite'"
        [spinning]="isSpinning()"
        [opened]="isOpened()"
        [color]="themeColor()"
        (sealClick)="openEnvelope()"
      ></app-envelope-seal>

      <!-- Letter (emerges from envelope) -->
      <div
        class="letter"
        (click)="expandLetter()"
        [class.clickable]="isEnvelopeDown() && !isEnvelopeHidden()"
      >
        @if (isEnvelopeDown() && !isEnvelopeHidden() && !isFullScreen()) {
          <div class="letter-tap-hint visible">
            <span>Toca para ver o convite</span>
          </div>
        }
        <ng-content></ng-content>
      </div>
    </div>
  </div>
}
